<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket Classes Classes JSONBottleClient JSONBottleInterface JSONBottleMessage JSONBottleServer × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"externals.list.html":{"id":"externals.list.html","title":"Externals","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket Externals Classes JSONBottleClient JSONBottleInterface JSONBottleMessage JSONBottleServer × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket JSONBottle Socket based JSON messaging system written for NodeJS. Checkout the API docs for full reference, and the code at nikolakanacki/json-bottle for implementation details. Features Simple API Utilizing ES6 classes Auto-reconnect clients Implements both fire-and-forget and request-response concepts Middleware system similar to Express Easily extendable Fast InstallUsing yarn: yarn add nikolakanacki/json-bottleUsing npm: npm install --save nikolakanacki/json-bottleRun testsnpm testUsage examplesCheckout the docs for the main components (classes): JSONBottleServer JSONBottleClient JSONBottleInterface JSONBottleMessage Serverconst HOST = 'localhost'; const PORT = 8008; const JSONBottle = require('json-bottle'); const server = new JSONBottle.Server(); server.on('connect', (socket) =&gt; { console.log(socket._id); // &gt; Socket id (UUIDv4) }); server.use('some-request-path', (message, next) =&gt; { console.log(message.body); // &gt; { some: &quot;Request data&quot; } message.respond({ some: &quot;Response data&quot; }); }); server.use('some-message-path', (message, next) =&gt; { console.log(message.body); // &gt; { some: &quot;Message data&quot; } }); server.start(PORT, HOST);Clientconst HOST = 'localhost'; const PORT = 8008; const JSONBottle = require('json-bottle'); const client = new JSONBottle.Client(); client.once('started', () =&gt; { client .request('some-request-path', { some: &quot;Request data&quot; }) .then((message) =&gt; { console.log(message.body); // &gt; { some: &quot;Response data&quot; } }); client.send('some-message-path', { some: 'Message body' }); }); client.start(PORT, HOST);InterfaceYou can use the JSONBottleInterface class to implement your own client and server provider. The main method to look at is JSONBottleInterface.setupSocket. For more info checkout the API docs and the code. Roadmap Write examples Make TLSServer and TLSClient classes with boilerplate LicenseMIT License Copyright (c) 2017 Nikola Kanački Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"external-Socket.html":{"id":"external-Socket.html","title":"External: Socket","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket External: Socket Socket Node net socket See: https://nodejs.org/api/net.html#net_class_net_socket × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"JSONBottleClient.html":{"id":"JSONBottleClient.html","title":"Class: JSONBottleClient","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket Class: JSONBottleClient JSONBottleClient JSONBottleClient new JSONBottleClient() Example const JSONBottleClient = require('json-bottle').Client; const client = new JSONBottleClient(); Extends JSONBottleInterface Methods clearPendingRequests( [error]) Clears all pending requests by failing them Parameters: Name Type Argument Description error Error &lt;optional&gt; Error to reject pending requests with Inherited From: JSONBottleInterface#clearPendingRequests Returns: - Self for chaining Type JSONBottleInterface createMessage(path, body) Create new message bound to this interface Parameters: Name Type Description path string Message path body Object Message body Inherited From: JSONBottleInterface#createMessage Returns: - New message bound to this interface Type JSONBottleMessage destroyAllSockets() Destroy all sockets Inherited From: JSONBottleInterface#destroyAllSockets Returns: - Self for chaining Type JSONBottleInterface destroySocket(id) Destroy socket Parameters: Name Type Description id string Socket id Inherited From: JSONBottleInterface#destroySocket Returns: - Socket with the passed id or undefined Type external:Socket | undefined getConfig(key) Get config key Parameters: Name Type Description key string Key to get the config for Inherited From: JSONBottleInterface#getConfig Returns: - Value for the key or undefined Type mixed getSocket(id) Get socket by ID Parameters: Name Type Description id string Socket id Inherited From: JSONBottleInterface#getSocket Returns: - Socket with the passed id or undefined Type external:Socket | undefined getSockets() Get all sockets as array Inherited From: JSONBottleInterface#getSockets Returns: - All sockets Type Array.&lt;external:Socket&gt; handleIncomingData(data [, socket]) Create message from input data. Mainly intended for internal use, but can be used from outside to inject message into the handling cycle. Parameters: Name Type Argument Description data string | JSONBottleMessage~data Either raw JSON string or a message data object (if object, id can be passed as well) socket external:Socket &lt;optional&gt; If present, represents the socket this message came from, otherwise the message returned will be treated as locally injected Inherited From: JSONBottleInterface#handleIncomingData Returns: - New message object Type JSONBottleMessage handleIncomingMessage(message) Process message through the next registered handler Parameters: Name Type Description message JSONBottleMessage Incoming message to process Inherited From: JSONBottleInterface#handleIncomingMessage Returns: - Self for chaining Type JSONBottleInterface request(path, body [, socketId] [, timeout]) Issue request Parameters: Name Type Argument Description path JSONBottleMessage~data.path Send on specified path body JSONBottleMessage~data.body Body to send socketId string &lt;optional&gt; Id of the socket to issue the request to (request will be sent to the first found socket if not provided) timeout number &lt;optional&gt; Response timeout in milliseconds, 10000 by default Inherited From: JSONBottleInterface#request Returns: - Promise representing the request Type Promise send(path, body [, socketId]) Send body on path to all sockets Parameters: Name Type Argument Description path JSONBottleMessage~data.path Send on specified path body JSONBottleMessage~data.body Body to send socketId string | Array.&lt;string&gt; &lt;optional&gt; If provided, sends to socket id(s) specified, otherwise sends to all socket Inherited From: JSONBottleInterface#send Returns: - Freshly sent message Type JSONBottleMessage sendMessage(message, sockets [, callback]) Send message Parameters: Name Type Argument Description message JSONBottleMessage Message to send sockets Array.&lt;external:Socket&gt; Array of sockets to send the message to callback JSONBottleInterface~outgoingMessageCallback &lt;optional&gt; Outgoing message callback Inherited From: JSONBottleInterface#sendMessage Returns: - Self for chaining Type JSONBottleInterface sendMessageRequest(message, socket, timeout) Send message as a request (await response) Parameters: Name Type Description message JSONBottleMessage Message that is issuing a request socket external:Socket Socket to send the request to timeout number Response timeout in milliseconds Inherited From: JSONBottleInterface#sendMessageRequest Returns: - Promise representing the request Type Promise setupSocket(socket) Setup socket Parameters: Name Type Description socket external:Socket Socket to setup Inherited From: JSONBottleInterface#setupSocket Returns: - Passed socket Type external:Socket start(port, host) Start JSONBottleClient instance Parameters: Name Type Description port number Port to listen to host string Host to bind to Returns: - Self instance for chaining Type JSONBottleClient stop( [cb]) Stop JSONBottleClient instance Parameters: Name Type Argument Description cb function &lt;optional&gt; Callback invoked once the client has stopped Returns: - Self instance for chaining Type JSONBottleClient use(callback) Use handler for all incoming messages Parameters: Name Type Argument Description callback JSONBottleInterface~incomingMessageHandlerCallback &lt;repeatable&gt; Message handler function Inherited From: JSONBottleInterface#use Returns: - Self for chaining Type JSONBottleInterface useOnce(callback) Use handler for any incoming message only once Parameters: Name Type Argument Description callback JSONBottleInterface~incomingMessageHandlerCallback &lt;repeatable&gt; Message handler function Inherited From: JSONBottleInterface#useOnce Returns: - Self for chaining Type JSONBottleInterface × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"JSONBottleInterface.html":{"id":"JSONBottleInterface.html","title":"Class: JSONBottleInterface","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket Class: JSONBottleInterface JSONBottleInterface JSONBottleInterface new JSONBottleInterface( [config]) Constructor Parameters: Name Type Argument Description config JSONBottleInterface~config &lt;optional&gt; Interface configuration Example const JSONBottleInterface = require('json-bottle').Interface; const iface = new JSONBottleInterface(); Methods clearPendingRequests( [error]) Clears all pending requests by failing them Parameters: Name Type Argument Description error Error &lt;optional&gt; Error to reject pending requests with Returns: - Self for chaining Type JSONBottleInterface createMessage(path, body) Create new message bound to this interface Parameters: Name Type Description path string Message path body Object Message body Returns: - New message bound to this interface Type JSONBottleMessage destroyAllSockets() Destroy all sockets Returns: - Self for chaining Type JSONBottleInterface destroySocket(id) Destroy socket Parameters: Name Type Description id string Socket id Returns: - Socket with the passed id or undefined Type external:Socket | undefined getConfig(key) Get config key Parameters: Name Type Description key string Key to get the config for Returns: - Value for the key or undefined Type mixed getSocket(id) Get socket by ID Parameters: Name Type Description id string Socket id Returns: - Socket with the passed id or undefined Type external:Socket | undefined getSockets() Get all sockets as array Returns: - All sockets Type Array.&lt;external:Socket&gt; handleIncomingData(data [, socket]) Create message from input data. Mainly intended for internal use, but can be used from outside to inject message into the handling cycle. Parameters: Name Type Argument Description data string | JSONBottleMessage~data Either raw JSON string or a message data object (if object, id can be passed as well) socket external:Socket &lt;optional&gt; If present, represents the socket this message came from, otherwise the message returned will be treated as locally injected Returns: - New message object Type JSONBottleMessage handleIncomingMessage(message) Process message through the next registered handler Parameters: Name Type Description message JSONBottleMessage Incoming message to process Returns: - Self for chaining Type JSONBottleInterface request(path, body [, socketId] [, timeout]) Issue request Parameters: Name Type Argument Description path JSONBottleMessage~data.path Send on specified path body JSONBottleMessage~data.body Body to send socketId string &lt;optional&gt; Id of the socket to issue the request to (request will be sent to the first found socket if not provided) timeout number &lt;optional&gt; Response timeout in milliseconds, 10000 by default Returns: - Promise representing the request Type Promise send(path, body [, socketId]) Send body on path to all sockets Parameters: Name Type Argument Description path JSONBottleMessage~data.path Send on specified path body JSONBottleMessage~data.body Body to send socketId string | Array.&lt;string&gt; &lt;optional&gt; If provided, sends to socket id(s) specified, otherwise sends to all socket Returns: - Freshly sent message Type JSONBottleMessage sendMessage(message, sockets [, callback]) Send message Parameters: Name Type Argument Description message JSONBottleMessage Message to send sockets Array.&lt;external:Socket&gt; Array of sockets to send the message to callback JSONBottleInterface~outgoingMessageCallback &lt;optional&gt; Outgoing message callback Returns: - Self for chaining Type JSONBottleInterface sendMessageRequest(message, socket, timeout) Send message as a request (await response) Parameters: Name Type Description message JSONBottleMessage Message that is issuing a request socket external:Socket Socket to send the request to timeout number Response timeout in milliseconds Returns: - Promise representing the request Type Promise setupSocket(socket) Setup socket Parameters: Name Type Description socket external:Socket Socket to setup Returns: - Passed socket Type external:Socket use(callback) Use handler for all incoming messages Parameters: Name Type Argument Description callback JSONBottleInterface~incomingMessageHandlerCallback &lt;repeatable&gt; Message handler function Returns: - Self for chaining Type JSONBottleInterface useOnce(callback) Use handler for any incoming message only once Parameters: Name Type Argument Description callback JSONBottleInterface~incomingMessageHandlerCallback &lt;repeatable&gt; Message handler function Returns: - Self for chaining Type JSONBottleInterface Type Definitions config Interface configuration object Type: object Properties: Name Type Argument Default Description timeout number &lt;optional&gt; 10000 Default timeout to use for the requests incomingMessageHandler Incoming message handler object Type: object Properties: Name Type Description test RegExp | null Path tester callback JSONBottleInterface~incomingMessageHandlerCallback Handler callback incomingMessageHandlerCallback(message) Incoming message handler callback Parameters: Name Type Description message JSONBottleMessage Incoming message being handled outgoingMessageCallback(error) Outgoing message callback Parameters: Name Type Description error Error | null The last error detected while sending to all destination sockets. No error will not abort the sending process. × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"JSONBottleMessage.html":{"id":"JSONBottleMessage.html","title":"Class: JSONBottleMessage","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket Class: JSONBottleMessage JSONBottleMessage JSONBottleMessage new JSONBottleMessage(data, owner [, origin]) Constructor Parameters: Name Type Argument Description data string | JSONBottleMessage~data Message data owner JSONBottleInterface JSONBottleInterface that created the message origin external:Socket &lt;optional&gt; If passed, represents the socket that the message came from (and can be replied to), otherwise message is treated as local Members body :object|undefined Message body Type: object | undefined id :string Message id Type: string origin :string|undefined Message origin (if message is not local) Type: string | undefined path :string|undefined Message path Type: string | undefined Methods &lt;static&gt; isValidId(id) Check if valid id Parameters: Name Type Description id mixed Id to check Returns: - True if valid, false otherwise Type boolean &lt;static&gt; isValidPath(path) Check if valid subject Parameters: Name Type Description path mixed Path to check Returns: - True if valid, false otherwise Type boolean copy( [data]) Prepopulate new message with data from the current one Parameters: Name Type Argument Description data JSONBottleMessage~data &lt;optional&gt; Data to override props from the current message Returns: - New message Type JSONBottleMessage isLocal() Check if message is local (self injected) Returns: - True if local, false otherwise Type boolean isReplied() Check if message was already replied to Returns: - True if replied, false otherwise Type boolean isValid() Check if message is valid Returns: - True if (assumed) valid, false otherwise Type boolean respond( [body]) Respond to the message Parameters: Name Type Argument Default Description body Object &lt;optional&gt; {} Body to send with a response Returns: - Self, for chaining Type JSONBottleMessage send( [destination] [, callback]) Send the message Parameters: Name Type Argument Description destination string | Array.&lt;string&gt; &lt;optional&gt; If provided, sends to socket id(s) specified, otherwise sends to all socket callback JSONBottleInterface~outgoingMessageCallback &lt;optional&gt; Outgoing message callback Returns: - Self for chaining Type JSONBottleMessage sendAsRequest( [destination] [, timeout]) Send the message as a request Parameters: Name Type Argument Default Description destination string &lt;optional&gt; Socket id to send the request to. If not present will send to the first socket found on this interface timeout number &lt;optional&gt; 10000 Request timeout in milliseconds Returns: - Promise representing the request Type Promise toJSON() Return message data object ready to be stringified Returns: - Message data object Type JSONBottleMessage~data toString() Get string representation of this message Returns: - String representation of the message Type string Type Definitions data Message data Type: Object Properties: Name Type Description id string Message unique id (will be generated if not passed) path string Message path body Object Message body, defaults to an empty object × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "},"JSONBottleServer.html":{"id":"JSONBottleServer.html","title":"Class: JSONBottleServer","body":" Documentation Classes JSONBottleClientJSONBottleInterfaceJSONBottleMessageJSONBottleServer Externals Socket Class: JSONBottleServer JSONBottleServer JSONBottleServer new JSONBottleServer() Example const JSONBottleServer = require('json-bottle').Server; const server = new JSONBottleServer(); Extends JSONBottleInterface Methods clearPendingRequests( [error]) Clears all pending requests by failing them Parameters: Name Type Argument Description error Error &lt;optional&gt; Error to reject pending requests with Inherited From: JSONBottleInterface#clearPendingRequests Returns: - Self for chaining Type JSONBottleInterface createMessage(path, body) Create new message bound to this interface Parameters: Name Type Description path string Message path body Object Message body Inherited From: JSONBottleInterface#createMessage Returns: - New message bound to this interface Type JSONBottleMessage destroyAllSockets() Destroy all sockets Inherited From: JSONBottleInterface#destroyAllSockets Returns: - Self for chaining Type JSONBottleInterface destroySocket(id) Destroy socket Parameters: Name Type Description id string Socket id Inherited From: JSONBottleInterface#destroySocket Returns: - Socket with the passed id or undefined Type external:Socket | undefined getConfig(key) Get config key Parameters: Name Type Description key string Key to get the config for Inherited From: JSONBottleInterface#getConfig Returns: - Value for the key or undefined Type mixed getSocket(id) Get socket by ID Parameters: Name Type Description id string Socket id Inherited From: JSONBottleInterface#getSocket Returns: - Socket with the passed id or undefined Type external:Socket | undefined getSockets() Get all sockets as array Inherited From: JSONBottleInterface#getSockets Returns: - All sockets Type Array.&lt;external:Socket&gt; handleIncomingData(data [, socket]) Create message from input data. Mainly intended for internal use, but can be used from outside to inject message into the handling cycle. Parameters: Name Type Argument Description data string | JSONBottleMessage~data Either raw JSON string or a message data object (if object, id can be passed as well) socket external:Socket &lt;optional&gt; If present, represents the socket this message came from, otherwise the message returned will be treated as locally injected Inherited From: JSONBottleInterface#handleIncomingData Returns: - New message object Type JSONBottleMessage handleIncomingMessage(message) Process message through the next registered handler Parameters: Name Type Description message JSONBottleMessage Incoming message to process Inherited From: JSONBottleInterface#handleIncomingMessage Returns: - Self for chaining Type JSONBottleInterface request(path, body [, socketId] [, timeout]) Issue request Parameters: Name Type Argument Description path JSONBottleMessage~data.path Send on specified path body JSONBottleMessage~data.body Body to send socketId string &lt;optional&gt; Id of the socket to issue the request to (request will be sent to the first found socket if not provided) timeout number &lt;optional&gt; Response timeout in milliseconds, 10000 by default Inherited From: JSONBottleInterface#request Returns: - Promise representing the request Type Promise send(path, body [, socketId]) Send body on path to all sockets Parameters: Name Type Argument Description path JSONBottleMessage~data.path Send on specified path body JSONBottleMessage~data.body Body to send socketId string | Array.&lt;string&gt; &lt;optional&gt; If provided, sends to socket id(s) specified, otherwise sends to all socket Inherited From: JSONBottleInterface#send Returns: - Freshly sent message Type JSONBottleMessage sendMessage(message, sockets [, callback]) Send message Parameters: Name Type Argument Description message JSONBottleMessage Message to send sockets Array.&lt;external:Socket&gt; Array of sockets to send the message to callback JSONBottleInterface~outgoingMessageCallback &lt;optional&gt; Outgoing message callback Inherited From: JSONBottleInterface#sendMessage Returns: - Self for chaining Type JSONBottleInterface sendMessageRequest(message, socket, timeout) Send message as a request (await response) Parameters: Name Type Description message JSONBottleMessage Message that is issuing a request socket external:Socket Socket to send the request to timeout number Response timeout in milliseconds Inherited From: JSONBottleInterface#sendMessageRequest Returns: - Promise representing the request Type Promise setupSocket(socket) Setup socket Parameters: Name Type Description socket external:Socket Socket to setup Inherited From: JSONBottleInterface#setupSocket Returns: - Passed socket Type external:Socket start(port, host) Start JSONBottleServer instance Parameters: Name Type Description port number Port to listen to host string Host to bind to Returns: - Self instance for chaining Type JSONBottleServer stop(cb) Stop the instance Parameters: Name Type Description cb function Callback function called once the undelying server is stopped Returns: - Self instance for chaining Type JSONBottleServer use(callback) Use handler for all incoming messages Parameters: Name Type Argument Description callback JSONBottleInterface~incomingMessageHandlerCallback &lt;repeatable&gt; Message handler function Inherited From: JSONBottleInterface#use Returns: - Self for chaining Type JSONBottleInterface useOnce(callback) Use handler for any incoming message only once Parameters: Name Type Argument Description callback JSONBottleInterface~incomingMessageHandlerCallback &lt;repeatable&gt; Message handler function Inherited From: JSONBottleInterface#useOnce Returns: - Self for chaining Type JSONBottleInterface × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-05-12T17:01:05+02:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
